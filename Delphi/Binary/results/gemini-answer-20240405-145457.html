
        <!DOCTYPE html>
        <html lang="pt-BR">
        <head>
        <meta charset="utf-8">
            <title>Gemini API (Google) 2024-04-05 14:54:57.977111</title>
            <link href='https://fonts.googleapis.com/css?family=PT+Sans'
        rel='stylesheet' type='text/css'>
            <style>
                body {
                    font-family: PT Sans;
                }
            </style>
        </head>
        <body>
            <h2>Aplicação Python para requisição assíncrona na API Ollama</h2>
<p><strong>Requisitos:</strong></p>
<ul>
<li>Python 3.7 ou superior</li>
<li>Pacote <code>aiohttp</code></li>
<li>Pacote <code>sqlite3</code></li>
</ul>
<p><strong>Código:</strong></p>
<p>```python
import asyncio
import aiohttp
import sqlite3</p>
<p>async def make_request(url, data):
    async with aiohttp.ClientSession() as session:
        async with session.post(url, json=data) as response:
            response_data = await response.json()
            return response_data</p>
<p>async def main():
    # Conexão com o banco de dados SQLite
    db = sqlite3.connect('database.sqlite')
    cursor = db.cursor()</p>
<pre><code># Dados da requisição
url = 'http://192.168.2.14:11434/api/generate'
data = {'text': 'Texto para gerar'}

# Início da medição de tempo
start_time = asyncio.get_event_loop_time()

# Requisição assíncrona
response_data = await make_request(url, data)

# Fim da medição de tempo
end_time = asyncio.get_event_loop_time()

# Cálculo do tempo de execução
execution_time = end_time - start_time

# Gravação dos dados no banco de dados
cursor.execute("""
    INSERT INTO requests (url, data, response, execution_time)
    VALUES (?, ?, ?, ?)
""", (url, data, response_data, execution_time))
db.commit()

# Fechamento da conexão com o banco de dados
cursor.close()
db.close()
</code></pre>
<p>if <strong>name</strong> == '<strong>main</strong>':
    asyncio.run(main())
```</p>
<p><strong>Explicação do código:</strong></p>
<ul>
<li>A função <code>make_request</code> faz a requisição assíncrona na API Ollama utilizando o pacote <code>aiohttp</code>.</li>
<li>A função <code>main</code> é a função principal da aplicação. Ela conecta-se ao banco de dados SQLite, faz a requisição assíncrona, calcula o tempo de execução e grava os dados no banco de dados.</li>
<li>O código utiliza o pacote <code>sqlite3</code> para conectar-se ao banco de dados SQLite e gravar os dados da requisição.</li>
</ul>
<p><strong>Observações:</strong></p>
<ul>
<li>Este código é um exemplo simples e pode ser adaptado de acordo com suas necessidades.</li>
<li>Você pode modificar a URL da API, os dados da requisição e o esquema do banco de dados.</li>
<li>É importante verificar se o pacote <code>aiohttp</code> e o pacote <code>sqlite3</code> estão instalados em seu ambiente Python.</li>
</ul>
<p><strong>Recursos adicionais:</strong></p>
<ul>
<li>Documentação do pacote <code>aiohttp</code>: <a href="https://aiohttp.readthedocs.io/en/stable/">https://aiohttp.readthedocs.io/en/stable/</a></li>
<li>Documentação do pacote <code>sqlite3</code>: <a href="https://docs.python.org/3/library/sqlite3.html">https://docs.python.org/3/library/sqlite3.html</a></li>
</ul>
            
        </body>
        </html>
        